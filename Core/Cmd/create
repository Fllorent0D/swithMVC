#!/usr/bin/php
<?php

// Définition des variables
if (!isset($argv[1]))
    die('Veuillez précisez un nom');
else {
    $name = $argv[1];
    $controllerName = ucfirst($name) . 'sController';
    $modelName = ucfirst($name);
    $entityName = ucfirst($name) . 'Entity';
}

if (isset($argv[2])) {
    $params = explode('-', $argv[2]);
    foreach ($params as $p) {
        if($p == 'm')
            m($modelName);
        if($p == 'v')
            v($name);
        if($p == 'c')
            c($controllerName);
        if($p == 'e')
            e($entityName);
    }
} else {
    c($controllerName);
    m($modelName);
    v($name);
    e($entityName);
}

function c($controllerName)
{
    // Création du controller
    echo('Création du controller '  . $controllerName . '.php' . "\n");
    $controllerFile = fopen('./App/Controllers/' . $controllerName . '.php', 'w+');
    fputs($controllerFile, '<?php

namespace App\Controllers;


class ' . $controllerName . ' extends AppController
{


}');
    fclose($controllerFile);
}

function m($modelName)
{
    // Création du model
    echo('Création du model ' . $modelName . '.php' . "\n");
    $modelFile = fopen('./App/Models/' . $modelName . '.php', 'w+');
    fputs($modelFile, '<?php

namespace App\Models;


class ' . $modelName . ' extends AppModel
{


}');
    fclose($modelFile);
}

function e($entityName)
{
    // Création de l'entité
    echo('Création de l\'entité ' . $entityName . '.php' . "\n");
    if(!file_exists('./App/Models/Entities'))
        mkdir('./App/Models/Entities');
    $entityFile = fopen('./App/Models/Entities/' . $entityName . '.php', 'w+');
    fputs($entityFile, '<?php

namespace App\Models\Entities;


class ' . $entityName . '
{


}');
    fclose($entityFile);
}

function v($name)
{
    // Création du dossier des vues
    echo('Création du dossier des vues ' . $name . 's' . "\n");
    mkdir('./App/Views/' . ucfirst($name) . 's');
}

?>